import { Meta, Story, Preview } from '@storybook/addon-docs/blocks';

# Table

## Overview

Table components are used to display data in grids. 
Accessible tables need HTML markup that indicates the difference between header cells and data cells, and indicate the relationship between them. 
The table should be responsive on different viewport devices and accessible to assistive technologies like screen readers.

## Responsive

When it comes to responsive behaviour in tables, there is no one solution. The solution depends on the amount of table data and how complex the table structure is. Shown below are 2 different approaches in acheiving responsive behaviour in tables.

### a) Table Scroll

This is the default approach and should be implemented when there is lots of data. In this approach the component table horizontal scroll is triggered when the table width is greater than the table container width helping the user to view data even on smaller viewport devices. 

To enable scroll feature, the table is wrapped by a container div with class `uq-table__wrapper`.

A shadow feature is added to the sides of the table when it overflows the container. It serves as a visual indication to the user that there is more data to be scrolled to the left or right. 
For instance when there is more content to the left, a transparent shadow appears to the left side of the table and when there is more content to the right, the shadow appears to the right side of the table.

<Preview withToolbar>
    <Story id="components-table--table" />
</Preview>

```html
<h3>Table - Basic tags with minimal classes</h3>
<div class="uq-table__wrapper">
    <table class="uq-table">
        <caption>Types of food and ratings</caption>
        <thead>
            <tr>
                <th>Type of Food</th>
                <th>Calories</th>
                <th>Tasty Factor</th>
                <th>Average Price</th>
                <th>Rarity</th>
                <th>Average Rating</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Slice of Pizza</td>
                <td>450</td>
                <td>95%</td>
                <td>$5.00</td>
                <td>Common</td>
                <td>8/10</td>
            </tr>
            <tr>
                <td>Hamburger</td>
                <td>350</td>
                <td>87%</td>
                <td>$3.50</td>
                <td>Common</td>
                <td>7.5/10</td>
            </tr>
        </tbody>
    </table>
</div>




<h3>Table - Basic tags with classes</h3>
<div class="uq-table__wrapper">
  <table class="uq-table">
      <caption class="uq-table__caption">Types of food and ratings</caption>
      <thead class="uq-table__head">
          <tr class="uq-table__row">
              <th class="uq-table__header uq-table__header--width-16">Type of Food</th>
              <th class="uq-table__header uq-table__header--width-16">Calories</th>
              <th class="uq-table__header uq-table__header--width-16">Tasty Factor</th>
              <th class="uq-table__header uq-table__header--width-16">Average Price</th>
              <th class="uq-table__header uq-table__header--width-16">Rarity</th>
              <th class="uq-table__header uq-table__header--width-16">Average Rating</th>
          </tr>
      </thead>
      <tbody class="uq-table__body">
          <tr class="uq-table__row">
              <td class="uq-table__cell">Slice of Pizza</td>
              <td class="uq-table__cell uq-table__cell--align-right">450</td>
              <td class="uq-table__cell uq-table__cell--align-right">95%</td>
              <td class="uq-table__cell uq-table__cell--align-right">$5.00</td>
              <td class="uq-table__cell">Common</td>
              <td class="uq-table__cell uq-table__cell--align-right">8/10</td>
          </tr>
          <tr class="uq-table__row">
            <td class="uq-table__cell">Hamburger</td>
            <td class="uq-table__cell uq-table__cell--align-right">350</td>
            <td class="uq-table__cell uq-table__cell--align-right">87%</td>
            <td class="uq-table__cell uq-table__cell--align-right">$3.50</td>
            <td>Common</td>
            <td class="uq-table__cell uq-table__cell--align-right">7.5/10</td>
          </tr>
      </tbody>
  </table>
</div>
```



### c) Table Card

In this responsive approach, the component table `tr` is displayed as a grid. Data attributes are used to display the table responsively on smaller viewports. 

<Preview withToolbar>
    <Story id="components-table--tablecard" />
</Preview>

```html
<table class="uq-table uq-table--card">
    <caption>Types of food and ratings</caption>
    <thead>
        <tr>
            <th>Type of Food</th>
            <th>Calories</th>
            <th>Tasty Factor</th>
            <th>Average Price</th>
            <th>Rarity</th>
            <th>Average Rating</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td data-title="Type of Food">Slice of Pizza</td>
            <td data-title="Calories">450</td>
            <td data-title="Tasty Factor">95%</td>
            <td data-title="Average Price">$5.00</td>
            <td data-title="Rarity">Common</td>
            <td data-title="Average Rating">8/10</td>
        </tr>
        <tr>
            <td data-title="Type of Food">Hamburger</td>
            <td data-title="Calories">350</td>
            <td data-title="Tasty Factor">87%</td>
            <td data-title="Average Price">$3.50</td>
            <td data-title="Rarity">Common</td>
            <td data-title="Average Rating">7.5/10</td>
        </tr>
    </tbody>
</table>
```

#### Breakpoints

The breakpoint for table cards are less than 640px.

## Accessibility

Data tables are used to organize data with a logical relationship in grids. Accessible tables need HTML markup that indicates header cells and data cells and defines their relationship. Assistive technologies use this information to provide context to users.

Accessibility in tables can be acheived to an extend by following some or part of the steps below depending on the table data structure.

1. Keep the table structure simple. Split data if needed to keep it simple or else user's using assistive technologies like screen readers will find it difficult to interpret data relationships.
2. Use right semantical html markups for tables wherever possible. (Example, `<table>`, `<thead>`, `<tfoot>`, `<tbody>`, `<th>`, `<td>`)
3. Though `<thead>`, `<tfoot>`, `<tbody>` makes no difference with assistive technologies like screen readers, they are useful when printing long tables that run over the next page. In such instances, the `<thead>`, `<tfoot>` gets repeated on the next printed page that gives the data context.
4. Use `<caption>` tag which defines a table caption. The `<caption>` tag must be inserted immediately after the `<table>` tag.  
Tip: By default, a table caption will be center-aligned above a table.
5. Header cells must be marked up with `<th>`, and data cells with `<td>` to make tables accessible. Commonly header cells are the first row or first column or both in a table.
6. Tables with two headers have a simple row header and a simple column header: For tables with unclear header directions, define the direction of each header by setting the scope attribute to `col` or `row`.

```html
<!-- 
`col` - specifies that the cell is a header for a column.  
`row` - specifies that the cell is a header for a row. 
-->
<table>
    <tr>
        <th>Name</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Address</th>
    </tr>
    <tr>
        <th scope="row">John Doe</th>
        <td>someone@example.com</td>
        <td>+45342323</td>
        <td>Rosevn 56,4300 Sandnes,Norway</td>
    </tr>
</table>
```

7. Tables with irregular headers have header cells that span multiple columns and/or rows: For these tables, define column and row groups and set the range of the header cells using the `colgroup` and `rowgroup` values of the scope attribute.

```html
<!-- 
`colgroup` - specifies that the cell is a header for a group of columns.  
`rowgroup` - specifies that the cell is a header for a group of rows.
-->
<table>
  <col>
  <colgroup span="2"></colgroup>
  <colgroup span="2"></colgroup>
  <tr>
    <td rowspan="2"></td>
    <th colspan="2" scope="colgroup">Mars</th>
    <th colspan="2" scope="colgroup">Venus</th>
  </tr>
  ...
  
</table>
``` 

8. Tables with multi-level headers have multiple header cells associated per data cell: For tables that are so complex that header cells canâ€™t be associated in a strictly horizontal or vertical way, use `id` and `headers` attributes to associate header and data cells explicitly.

```html
<!-- 
Assigning id attributes to <th> cells
-->
...
	<th id="par" colspan="5" scope="colgroup">Paris</th>
</tr>
<tr>
	<th id="pbed1">1 bedroom</th>
...

<!-- 
Assigning header attributes to <td> cells
-->
...
<td headers="par pbed1 stud">11</td>
<td headers="par pbed1 apt"> 20</td>
...

```

For further reference on accessibility in tables, visit https://www.w3.org/WAI/tutorials/tables/multi-level/